/** chartist-plugin-columntooltips 1.0.0
 * Copyright Â© 2016 THE STORY
 * Free to use under the MIT license.
 * https://opensource.org/licenses/MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a["Chartist.plugins.ctAxisTooltips"]=b()}):"object"==typeof exports?module.exports=b():a["Chartist.plugins.ctAxisTooltips"]=b()}(this,function(){return function(a,b,c){"use strict";var d={classNames:{line:"ct-line",lineGroup:"ct-lines",column:"ct-column",columnGroup:"ct-columns",point:"ct-custom-point",pointGroup:"ct-column-point-group",pointGroups:"ct-column-point-groups",tooltip:"ct-column-tooltip",cloud:"ct-cloud"},showLine:!0,showPointsOnHover:!0};c.plugins=c.plugins||{},c.plugins.ctAxisTooltips=function(a){return a=c.extend({},d,a),function(c){function d(){var d=b.createElement("div"),e=b.createElement("div"),f=b.createElement("ul");d.classList.add(a.classNames.tooltip),e.classList.add(a.classNames.cloud);for(var g=0;g<c.data.series.length;g++){var h=b.createElement("li");f.appendChild(h)}return e.appendChild(f),d.appendChild(e),s.appendChild(d),d}function e(a,b,c){s.addEventListener(a,function(a){b&&!a.target.classList.contains(b)||c(a)})}function f(b){var d=g(b);a.showPointsOnHover&&(c.ctAxisTooltips.points=h(b,d)),a.showLine&&(c.ctAxisTooltips.lines=j(b,d)),c.ctAxisTooltips.columnSet=k(b,d)}function g(a){var b=c.data.labels.length-c.options.fullWidth;return a.chartRect.width()/b}function h(b,d){var e=c.svg.elem("g").addClass(a.classNames.pointGroups);e.points=[];for(var f=0;f<c.data.labels.length;f++){var g=e.elem("g").addClass(a.classNames.pointGroup);e.points.push(g)}for(var h=0;h<c.ctAxisTooltips.oldPoints.length;h++)for(var j=0;j<c.ctAxisTooltips.oldPoints[h].length;j++)i(e,h,j);return e}function i(b,d,e){var f=b.points[e],g=f.elem("g").addClass(a.classNames.point),h=c.ctAxisTooltips.oldPoints[d][e],i={x1:h._node.x1.baseVal.value,x2:h._node.x2.baseVal.value,y1:h._node.y1.baseVal.value,y2:h._node.y2.baseVal.value};g.elem("line",i,"ct-custom-point-shadow"),g.elem("line",i,"ct-custom-point-fill"),h.remove()}function j(b,d){var e=c.svg.elem("g").addClass(a.classNames.lineGroup);e.lines=[];for(var f=0;f<c.data.labels.length;f++){var g=d*f+b.axisX.chartRect.x1,h={x1:g,x2:g,y1:b.chartRect.y1,y2:b.chartRect.y2},i=e.elem("line",h,a.classNames.line);e.lines.push(i)}return e}function k(b,d){var e=c.svg.elem("g").addClass(a.classNames.columnGroup);e.columns=[];for(var f=0;f<c.data.labels.length;f++){var g=d*f+b.axisX.chartRect.x1,h={x1:g,x2:g,y1:b.chartRect.y1,y2:b.chartRect.y2},i=e.elem("line",h,a.classNames.column).attr({index:f,"stroke-width":d+"px"});e.columns.push(i)}return e}function l(a,b){for(var d=a.querySelectorAll("ul li"),e=0;e<c.data.series.length;e++)d[e].textContent=c.data.series[e][b]}function m(a,b){a.style.left=b+"px",a.classList.add("visible"),b>c.ctAxisTooltips.columnSet.width()/2?a.classList.add("switch-side"):a.classList.remove("switch-side")}function n(a){c.ctAxisTooltips.lines.lines[a].attr({visible:!0})}function o(a){c.ctAxisTooltips.lines.lines[a].attr({visible:!1})}function p(a){c.ctAxisTooltips.points.points[a].attr({visible:!0})}function q(a){c.ctAxisTooltips.points.points[a].attr({visible:!1})}function r(){c.ctAxisTooltips.oldPoints=[];for(var a=0;a<c.data.series.length;a++)c.ctAxisTooltips.oldPoints[a]=[]}var s=c.container,t=s.querySelector("."+a.classNames.tooltip);c.ctAxisTooltips={},t||(t=d()),e("mouseover",a.classNames.column,function(b){var c=b.target.getAttribute("index");l(t,c),m(t,b.target.attributes.x1.value),a.showLine&&n(c),a.showPointsOnHover&&p(c)}),e("mouseout",a.classNames.column,function(b){var c=b.target.getAttribute("index");t.classList.remove("visible"),a.showLine&&o(c),a.showPointsOnHover&&q(c)}),a.showPointsOnHover&&(c.options.showPoint?(r(),c.on("draw",function(a){"point"===a.type&&(c.ctAxisTooltips.oldPoints[a.seriesIndex][a.index]=a.element)})):(a.showPointsOnHover=!1,console.warn("Chart's option 'showPoint' must be enabled touse hover points feature"))),c.on("created",function(a){f(a)}),c.on("update",function(a){f(a)})}}}(window,document,Chartist),Chartist.plugins.ctAxisTooltips});
//# sourceMappingURL=chartist-plugin-columntooltips.min.js.map